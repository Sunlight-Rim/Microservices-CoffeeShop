syntax = "proto3";

package users;

import "google/protobuf/timestamp.proto";

option go_package = ".;users_pb";


service UsersService {
    rpc Create (CreateUserRequest) returns (CreateUserResponse);
    rpc Get (GetUserRequest) returns (GetUserResponse); // one or more
    rpc Update (UpdateUserRequest) returns (UpdateUserResponse);
    rpc Delete (DeleteUserRequest) returns (DeleteUserResponse);
}

message User {
    string username = 1;
    string address = 2;
    google.protobuf.Timestamp date = 3;
    repeated int64 order_ids = 4;
    // also have token in database
}

// Create

message CreateUserRequest {
    string username = 1;
    string pass = 2;
    string address = 3;
}

message CreateUserResponse {
    User user = 1;
}

// Get

message GetUserRequest {
    repeated int64 usernames = 1;
}

message GetUserResponse {
    repeated User users = 1;
}

// Update

message UpdateUserRequest {
    string username = 1;
    string token = 2;
    User user = 3;
}

message UpdateUserResponse {
    User user = 1;
}

// Delete

message DeleteUserRequest {
    string username = 1;
    string token = 2;
}

message DeleteUserResponse {
    User user = 1;
}